{"version":3,"sources":["../../app/validations/validate.js"],"names":["module","exports","validateBody","schema","req","res","next","result","Joi","validate","body","abortEarly","error","errors","details","map","current","key","context","Rule","message","replace","status","json","value"],"mappings":";;AAGA;;;;AAHA;;;AAKA;AACAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,YADe,wBACFC,MADE,EACM;AACnB,WAAO,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACzB,UAAMC,MAAM,GAAGC,aAAIC,QAAJ,CAAaL,GAAG,CAACM,IAAjB,EAAuBP,MAAvB,EAA+B;AAC5CQ,QAAAA,UAAU,EAAE;AADgC,OAA/B,CAAf;;AAIA,UAAIJ,MAAM,CAACK,KAAX,EAAkB;AAChB,YAAMC,MAAM,GAAGN,MAAM,CAACK,KAAP,CAAaE,OAAb,CAAqBC,GAArB,CAAyB,UAAAC,OAAO;AAAA,iBAAK;AAClDC,YAAAA,GAAG,EAAED,OAAO,CAACE,OAAR,CAAgBD,GAD6B;AAElDE,YAAAA,IAAI,EAAEH,OAAO,CAACI,OAAR,CAAgBC,OAAhB,CAAwB,OAAxB,EAAiC,EAAjC;AAF4C,WAAL;AAAA,SAAhC,CAAf;AAKA,eAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,UAAAA,MAAM,EAAE,GADkB;AAE1BV,UAAAA,KAAK,EAAEC;AAFmB,SAArB,CAAP;AAID;;AACDT,MAAAA,GAAG,CAACoB,KAAJ,GAAY,EAAZ;AACApB,MAAAA,GAAG,CAACoB,KAAJ,CAAUd,IAAV,GAAiBH,MAAM,CAACiB,KAAxB;AAEA,aAAOlB,IAAI,EAAX;AACD,KApBD;AAqBD;AAvBc,CAAjB","sourcesContent":["/**\n * Import external modules\n */\nimport Joi from 'joi';\n\n// Schema validation function\nmodule.exports = {\n  validateBody(schema) {\n    return (req, res, next) => {\n      const result = Joi.validate(req.body, schema, {\n        abortEarly: false,\n      });\n\n      if (result.error) {\n        const errors = result.error.details.map(current => ({\n          key: current.context.key,\n          Rule: current.message.replace(/['\"]/g, ''),\n        }));\n\n        return res.status(400).json({\n          status: 400,\n          error: errors,\n        });\n      }\n      req.value = {};\n      req.value.body = result.value;\n\n      return next();\n    };\n  },\n};\n"],"file":"validate.js"}